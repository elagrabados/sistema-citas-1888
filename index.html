<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Citas v5.3 - 1888hoteles</title>
    <style>
        body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;background-color:#f4f7f9;color:#333;line-height:1.6;margin:0;padding:20px}
        .container{max-width:950px;margin:0 auto;background-color:#fff;padding:25px 40px;border-radius:12px;box-shadow:0 6px 20px rgba(0,0,0,.08)}
        /* CORRECCI√ìN LOGO: Ajuste de tama√±o y m√°rgenes */
        .logo{display:block;margin:0 auto 20px;max-width:250px;height:auto}
        
        h1,h2,h3{color:#1a3b5d;text-align:center}
        h3{margin-top:0; margin-bottom: 0;}
        .subtitle{text-align:center;color:#888;margin-top:0;margin-bottom:30px;font-style:italic}
        
        /* Grid del Formulario */
        .form-grid{display:grid;grid-template-columns:repeat(12, 1fr);gap:15px}
        .col-3{grid-column: span 3} .col-4{grid-column: span 4} .col-6{grid-column: span 6} .col-8{grid-column: span 8} .col-12{grid-column: span 12}
        
        .form-group{display:flex;flex-direction:column}
        label{font-weight:600;margin-bottom:5px;color:#555;font-size:0.9rem}
        input,select,textarea{width:100%;padding:10px;border:1px solid #ccc;border-radius:6px;font-size:1rem}
        textarea{resize:vertical;min-height:100px}
        
        .main-button{background-color:#007bff;color:#fff;padding:15px;border:none;border-radius:8px;font-weight:700;font-size:1.2rem;width:100%;cursor:pointer;margin-top:20px}
        .main-button:hover{background-color:#0056b3}
        
        .sheets-button{background-color:#107c41;color:#fff;padding:12px;border:none;border-radius:6px;font-weight:700;width:100%;cursor:pointer;margin-bottom:15px;display:flex;align-items:center;justify-content:center;gap:10px}
        .sheets-button:hover{background-color:#0b5c30}
        
        .output-container{margin-top:30px;padding-top:20px;border-top:2px solid #eee}
        .output-box{position:relative;margin-bottom:15px}
        .copy-button{position:absolute;top:30px;right:10px;background-color:#28a745;color:#fff;border:none;padding:5px 10px;border-radius:4px;cursor:pointer}
        .hidden{display:none}

        /* --- ESTILOS EXACTOS HISTORIAL --- */
        .history-section {margin-top:40px; border-top:2px solid #ddd; padding-top:20px;}
        
        .history-controls {
            display:flex; 
            justify-content:space-between; 
            align-items:center; 
            margin-bottom:15px;
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 6px;
        }

        #historySearchInput {
            width: 300px;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .clear-btn {
            background-color:#dc3545; 
            color:white; 
            border:none; 
            padding:10px 15px; 
            border-radius:5px; 
            cursor:pointer;
            font-weight: 600;
        }
        .clear-btn:hover {background-color: #c82333;}

        table {width:100%; border-collapse:collapse; font-size:0.9rem; margin-top: 10px;}
        th, td {border:1px solid #e9ecef; padding:12px; text-align:left;}
        th {background-color:#f2f2f2; color: #333; font-weight: 700;}
        tr:nth-child(even) {background-color: #f9f9f9;}

        .regenerate-btn {
            background-color:#17a2b8;
            color:white; 
            border:none; 
            padding:6px 12px; 
            border-radius:4px; 
            cursor:pointer;
            font-weight: 600;
        }
        .regenerate-btn:hover {background-color:#138496;}

        @media (max-width:700px){
            .col-3,.col-4,.col-6,.col-8{grid-column: span 12}
            .history-controls {flex-direction: column; gap: 10px;}
            #historySearchInput {width: 100%;}
            table, thead, tbody, th, td, tr {display:block;}
            thead tr {position:absolute; top:-9999px; left:-9999px;}
            tr {margin-bottom:15px; border:1px solid #ccc;}
            td {border:none; border-bottom:1px solid #eee; position:relative; padding-left:50%;}
            td:before {position:absolute; top:10px; left:10px; width:45%; padding-right:10px; white-space:nowrap; font-weight:bold; content: attr(data-label);}
        }
    </style>
</head>
<body>
    <div class="container">
        <img src="logo.png" alt="Logo 1888hoteles" class="logo">
        
        <h1>Sistema de Citas y Lead Management</h1>
        <p class="subtitle">Desarrollado por Ali Gomez</p>
        
        <form id="citaForm">
             <div class="form-grid">
                <div class="form-group col-4">
                    <label>A. Fuente de Lead</label>
                    <select id="fuenteLead" required>
                        <option value="IG">Instagram (IG)</option>
                        <option value="FB">Facebook (FB)</option>
                        <option value="REF">Referido (REF)</option>
                        <option value="OTRO">Otro</option>
                    </select>
                </div>
                <div class="form-group col-8">
                    <label>B. Agente a Cargo</label>
                    <select id="agente" required>
                        <option value="Paula Gonz√°lez">Paula Gonz√°lez</option>
                        <option value="Patricia Bustos">Patricia Bustos</option>
                        <option value="Ana Chacon">Ana Chacon</option>
                        <option value="Andrea Venegas">Andrea Venegas</option>
                    </select>
                </div>

                <div class="form-group col-8">
                    <label>K. Nombre Invitado Principal</label>
                    <input type="text" id="invitado1" placeholder="Nombre completo" required>
                </div>
                <div class="form-group col-4">
                    <label>L. Edad</label>
                    <input type="number" id="edad1" placeholder="Ej: 35">
                </div>

                <div class="form-group col-4">
                    <label>Tipo Invitaci√≥n (Q)</label>
                    <select id="tipoInvitacion" required>
                        <option value="pareja">Pareja</option>
                        <option value="soltera">Mujer Soltera</option>
                    </select>
                </div>
                <div class="form-group col-6 invitado2-field">
                    <label>M. Nombre Invitado 2</label>
                    <input type="text" id="invitado2" placeholder="Nombre Pareja">
                </div>
                <div class="form-group col-2 invitado2-field">
                    <label>N. Edad</label>
                    <input type="number" id="edad2" placeholder="Edad">
                </div>

                <div class="form-group col-6">
                    <label>O. Tel√©fono</label>
                    <input type="tel" id="telefonoCliente" required>
                </div>
                <div class="form-group col-6">
                    <label>P. Email (Opcional)</label>
                    <input type="email" id="emailCliente" placeholder="cliente@email.com">
                </div>

                <div class="form-group col-6">
                    <label>D. Lugar de la Cita</label>
                    <select id="lugar" required>
                        <option value="">-- Seleccione --</option>
                        <option value="Icon Park Orlando">Icon Park Orlando</option>
                        <option value="Vista Cay Resort">Vista Cay Resort</option>
                        <option value="Newport Beachside Resort">Newport Beachside Resort</option>
                    </select>
                </div>
                <div class="form-group col-3">
                    <label>G. Fecha Evento</label>
                    <input type="date" id="fecha" required>
                </div>
                <div class="form-group col-3">
                    <label>I. Hora</label>
                    <select id="hora" required><option>--</option></select>
                </div>

                <div class="form-group col-12">
                    <label>S. Destino Principal (Regalo)</label>
                    <select id="destinoRegalo" required>
                        <option value="Key West">Key West</option>
                        <option value="Las Vegas">Las Vegas</option>
                        <option value="Orlando">Orlando</option>
                        <option value="Crucero">Crucero Bahamas</option>
                        <option value="Punta Cana">Punta Cana</option>
                        <option value="Cancun">Cancun</option>
                        <option value="Otro">Otro</option>
                    </select>
                </div>

                <div class="form-group col-12">
                    <label>Descripci√≥n de Oferta (Para WhatsApp)</label>
                    <textarea id="oferta" required>üè® 3 d√≠as y 2 noches de Hotel en Key West con desayunos incluidos. (Vigencia 18 meses) 

üëâ Y SOLO POR NUESTRA SEMANA ANIVERSARIAüëà

üçΩ $200 para utilizar en consumo en Restaurantes.

üè® Hospedaje adicional 3 d√≠as y 2 noches en Las Vegas con boleter√≠a a√©rea ida y vuelta para dos personas</textarea>
                </div>
                
                <div class="form-group col-12">
                    <label>E. Comentarios / Notas Internas</label>
                    <input type="text" id="notasInternas" placeholder="Opcional">
                </div>
            </div>
            <button type="button" class="main-button" id="generateButton">Generar Cita</button>
        </form>
        
        <div id="outputContainer" class="output-container hidden">
            <button class="sheets-button" id="copySheetsButton">
                üìã COPIAR FILA PARA GOOGLE SHEETS
            </button>
            <p style="text-align:center; font-size:0.8rem; color:#666; margin-top:-10px; margin-bottom:20px">Clic arriba y luego Ctrl+V en la Columna A de tu hoja</p>

            <h3>Mensajes para WhatsApp</h3>
            <div class="output-box"><label>1. Cita y Oferta</label><textarea id="whatsappOutput1" readonly></textarea><button class="copy-button" data-target="whatsappOutput1">Copiar</button></div>
            <div class="output-box"><label>2. Direcci√≥n</label><textarea id="whatsappOutput2" readonly></textarea><button class="copy-button" data-target="whatsappOutput2">Copiar</button></div>
            <div class="output-box"><label>3. Requisitos</label><textarea id="whatsappOutput3" readonly></textarea><button class="copy-button" data-target="whatsappOutput3">Copiar</button></div>
            <div class="output-box"><label>4. Confirmaci√≥n Manager</label><textarea id="confirmationOutput" readonly></textarea><button class="copy-button" data-target="confirmationOutput">Copiar</button></div>
        </div>

        <div class="history-section">
             <div class="history-controls">
                 <input type="search" id="historySearchInput" placeholder="Buscar por tel√©fono...">
                 <button id="clearHistoryButton" class="clear-btn">Limpiar Historial</button>
             </div>
             
             <table>
                 <thead>
                     <tr>
                         <th>Invitados</th>
                         <th>Tel√©fono</th>
                         <th>Agente</th>
                         <th>Lugar</th>
                         <th>Fecha y Hora</th>
                         <th>Generado</th>
                         <th>Acciones</th>
                     </tr>
                 </thead>
                 <tbody id="historyTableBody"></tbody>
             </table>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <script src="database.js"></script>
    <script src="script.js"></script>
</body>
</html>
